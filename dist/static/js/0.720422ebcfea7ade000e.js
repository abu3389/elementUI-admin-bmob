webpackJsonp([0],{"+L/W":function(e,t){function n(e,t){let n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,o,r,s,i){return n((a=n(n(t,e),n(r,i)))<<(c=s)|a>>>32-c,o);var a,c}function r(e,t,n,r,s,i,a){return o(t&n|~t&r,e,t,s,i,a)}function s(e,t,n,r,s,i,a){return o(t&r|n&~r,e,t,s,i,a)}function i(e,t,n,r,s,i,a){return o(t^n^r,e,t,s,i,a)}function a(e,t,n,r,s,i,a){return o(n^(t|~r),e,t,s,i,a)}e.exports={hexMD5:function(e){return function(e){let t="";for(let n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>n%4*8+4&15)+"0123456789abcdef".charAt(e[n>>2]>>n%4*8&15);return t}(function(e){let t=1732584193,o=-271733879,c=-1732584194,u=271733878;for(let l=0;l<e.length;l+=16){let p=t,d=o,h=c,f=u;o=a(o=a(o=a(o=a(o=i(o=i(o=i(o=i(o=s(o=s(o=s(o=s(o=r(o=r(o=r(o=r(o,c=r(c,u=r(u,t=r(t,o,c,u,e[l+0],7,-680876936),o,c,e[l+1],12,-389564586),t,o,e[l+2],17,606105819),u,t,e[l+3],22,-1044525330),c=r(c,u=r(u,t=r(t,o,c,u,e[l+4],7,-176418897),o,c,e[l+5],12,1200080426),t,o,e[l+6],17,-1473231341),u,t,e[l+7],22,-45705983),c=r(c,u=r(u,t=r(t,o,c,u,e[l+8],7,1770035416),o,c,e[l+9],12,-1958414417),t,o,e[l+10],17,-42063),u,t,e[l+11],22,-1990404162),c=r(c,u=r(u,t=r(t,o,c,u,e[l+12],7,1804603682),o,c,e[l+13],12,-40341101),t,o,e[l+14],17,-1502002290),u,t,e[l+15],22,1236535329),c=s(c,u=s(u,t=s(t,o,c,u,e[l+1],5,-165796510),o,c,e[l+6],9,-1069501632),t,o,e[l+11],14,643717713),u,t,e[l+0],20,-373897302),c=s(c,u=s(u,t=s(t,o,c,u,e[l+5],5,-701558691),o,c,e[l+10],9,38016083),t,o,e[l+15],14,-660478335),u,t,e[l+4],20,-405537848),c=s(c,u=s(u,t=s(t,o,c,u,e[l+9],5,568446438),o,c,e[l+14],9,-1019803690),t,o,e[l+3],14,-187363961),u,t,e[l+8],20,1163531501),c=s(c,u=s(u,t=s(t,o,c,u,e[l+13],5,-1444681467),o,c,e[l+2],9,-51403784),t,o,e[l+7],14,1735328473),u,t,e[l+12],20,-1926607734),c=i(c,u=i(u,t=i(t,o,c,u,e[l+5],4,-378558),o,c,e[l+8],11,-2022574463),t,o,e[l+11],16,1839030562),u,t,e[l+14],23,-35309556),c=i(c,u=i(u,t=i(t,o,c,u,e[l+1],4,-1530992060),o,c,e[l+4],11,1272893353),t,o,e[l+7],16,-155497632),u,t,e[l+10],23,-1094730640),c=i(c,u=i(u,t=i(t,o,c,u,e[l+13],4,681279174),o,c,e[l+0],11,-358537222),t,o,e[l+3],16,-722521979),u,t,e[l+6],23,76029189),c=i(c,u=i(u,t=i(t,o,c,u,e[l+9],4,-640364487),o,c,e[l+12],11,-421815835),t,o,e[l+15],16,530742520),u,t,e[l+2],23,-995338651),c=a(c,u=a(u,t=a(t,o,c,u,e[l+0],6,-198630844),o,c,e[l+7],10,1126891415),t,o,e[l+14],15,-1416354905),u,t,e[l+5],21,-57434055),c=a(c,u=a(u,t=a(t,o,c,u,e[l+12],6,1700485571),o,c,e[l+3],10,-1894986606),t,o,e[l+10],15,-1051523),u,t,e[l+1],21,-2054922799),c=a(c,u=a(u,t=a(t,o,c,u,e[l+8],6,1873313359),o,c,e[l+15],10,-30611744),t,o,e[l+6],15,-1560198380),u,t,e[l+13],21,1309151649),c=a(c,u=a(u,t=a(t,o,c,u,e[l+4],6,-145523070),o,c,e[l+11],10,-1120210379),t,o,e[l+2],15,718787259),u,t,e[l+9],21,-343485551),t=n(t,p),o=n(o,d),c=n(c,h),u=n(u,f)}return[t,o,c,u]}(function(e){let t=1+(e.length+8>>6),n=new Array(16*t);for(let e=0;e<16*t;e++)n[e]=0;for(var o=0;o<e.length;o++)n[o>>2]|=(255&e.charCodeAt(o))<<o%4*8;return n[o>>2]|=128<<o%4*8,n[16*t-2]=8*e.length,n}(e)))}}},"/Fa/":function(e,t,n){"use strict";var o=n("qSdQ");e.exports=o.isStandardBrowserEnv()?{write:function(e,t,n,r,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(r)&&a.push("path="+r),o.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"09bm":function(e,t,n){"use strict";var o=n("nHR3");e.exports=function(e,t,n,r,s){var i=new Error(e);return o(i,t,n,r,s)}},"0KGY":function(e,t){e.exports={host:"https://apitest.bmob.cn",applicationId:"",applicationKey:"",parameters:{GENERATECODE:"/1/wechatApp/qr/generatecode",GETACCESSTOKEN:"/1/wechatApp/getAccessToken",SENDWEAPPMESSAGE:"/1/wechatApp/SendWeAppMessage",NOTIFYMSG:"/1/wechatApp/notifyMsg",REFUND:"/1/pay/refund",REQUESTSMSCODE:"/1/requestSmsCode",VERIFYSMSCODE:"/1/verifySmsCode",FUNCTIONS:"/1/functions",REQUESTPASSWORDRESET:"/1/requestPasswordReset",RESETPASSWORDBYSMSCODE:"/1/resetPasswordBySmsCode",UPDATEUSERPASSWORD:"/1/updateUserPassword",PUSH:"/1/push",FILES:"/2/files",DELFILES:"/2/cdnBatchDelete",TIMESTAMP:"/1/timestamp",LOGIN:"/1/login",REGISTER:"/1/users",REQUEST_EMAIL_VERIFY:"/1/requestEmailVerify",USERS:"/1/users",PAY:"/1/pay",WECHAT_APP:"/1/wechatApp/",BATCH:"/1/batch",CHECK_MSG:"/1/wechatApp/checkMsg",DECRYPTION:"/1/wechatApp/decryption",QUERY:"/1/classes"},version:1,deBug:!1,type:1}},"0nie":function(e,t,n){"use strict";var o=n("qSdQ"),r=n("TO1N"),s=n("nHBG"),i=n("LE8+"),a=n("FfhM"),c=n("09bm"),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n("M6jA");e.exports=function(e){return new Promise(function(t,l){var p=e.data,d=e.headers;o.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest,f="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(e.url)||(h=new window.XDomainRequest,f="onload",m=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var g=e.auth.username||"",w=e.auth.password||"";d.Authorization="Basic "+u(g+":"+w)}if(h.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[f]=function(){if(h&&(4===h.readyState||m)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?i(h.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};r(t,l,o),h=null}},h.onerror=function(){l(c("Network Error",e,null,h)),h=null},h.ontimeout=function(){l(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},o.isStandardBrowserEnv()){var y=n("/Fa/"),b=(e.withCredentials||a(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&o.forEach(d,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===p&&(p=null),h.send(p)})}},"0zzc":function(e,t,n){const o=n("6goN"),r=n("2MHW"),s=n("l39Q"),{isObject:i,isString:a}=n("1kO2");e.exports={requestSmsCode:(e,t)=>{if(!i(e))throw new s(415);let n=r._config.parameters.REQUESTSMSCODE;return o(n,"post",e)},verifySmsCode:(e,t,n)=>{if(!a(e))throw new s(415);if(!i(t))throw new s(415);let c=`${r._config.parameters.VERIFYSMSCODE}/${e}`;return o(c,"post",t)}}},"1Iar":function(e,t,n){const{isString:o}=n("1kO2");let r;r="undefined"!=typeof cc?cc.sys.localStorage:localStorage;const s={save(e,t){if(!o(e)||!t)throw new Error(415);r.setItem(e,JSON.stringify(t))},fetch(e){if(!o(e))throw new Error(415);return JSON.parse(r.getItem(e))||null},remove(e){if(!o(e))throw new Error(415);r.removeItem(e)},clear(){r.clear()}};e.exports=s},"1kO2":function(e,t){e.exports={isObject:e=>"[object Object]"===Object.prototype.toString.call(e),isNumber:e=>"[object Number]"===Object.prototype.toString.call(e),isString:e=>"[object String]"===Object.prototype.toString.call(e),isUndefined:e=>"[object Undefined]"===Object.prototype.toString.call(e),isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isArray:e=>"[object Array]"===Object.prototype.toString.call(e),isFunction:e=>"[object Function]"===Object.prototype.toString.call(e)}},"1qbz":function(e,t,n){"use strict";(function(t){var o=n("qSdQ"),r=n("qRwy"),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=n("0nie"):void 0!==t&&(a=n("0nie")),a),transformRequest:[function(e,t){return r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){c.headers[e]={}}),o.forEach(["post","put","patch"],function(e){c.headers[e]=o.merge(s)}),e.exports=c}).call(t,n("W2nU"))},"2MHW":function(e,t,n){(function(t){const o=n("ktOl"),r=t.Bmob||{};r.utils=o,r._config=o.getConfig(),r.initialize=((e,t,n)=>{t.length>6&&console.log("Bmob初始化失败，2.0版本SDK请使用API安全码初始化，文档地址：https://bmob.github.io/hydrogen-js-sdk/#/?id=初始化"),r._config.secretKey=e,r._config.securityCode=t,r._config.applicationMasterKey=n}),r.debug=(e=>{r._config.deBug=e,r._config=o.getConfig(e)}),e.exports=r}).call(t,n("DuR2"))},"3fs2":function(e,t,n){var o=n("RY/4"),r=n("dSzd")("iterator"),s=n("/bQp");e.exports=n("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[o(e)]}},"3soa":function(e,t,n){let o=n("2MHW"),r=n("+L/W");e.exports=((e,t="get",s={})=>new Promise((i,a)=>{const c=((e,t)=>{const n=Math.round((new Date).getTime()/1e3),s=o.utils.randomString();let i={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":r.hexMD5(t+n+e.securityCode+s),"X-Bmob-Safe-Timestamp":n,"X-Bmob-Noncestr-Key":s,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(i["X-Bmob-Master-Key"]=e.applicationMasterKey),i})(o._config,e);void 0===o.User&&(o=n("2MHW"));let u=o.User.current();u&&(c["X-Bmob-Session-Token"]=u.sessionToken),"object"==typeof s&&(s=JSON.stringify(s)),"xxrequire('@system.fetch')xx".fetch({url:o._config.host+e,header:c,method:t,data:s,success:function(e){const t=JSON.parse(e.data);t.code&&a(t),i(t)},fail:function(e,t){console.log(`handling fail, code = ${t}`),a(e)}})}))},"6YN9":function(e,t,n){"use strict";var o=n("aQjw");function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},"6goN":function(e,t,n){let o;const r=n("ktOl").getAppType();"h5"===r?o=n("DirS"):"wx"===r?o=n("iun9"):"hap"===r?o=n("3soa"):"nodejs"===r&&(o=n("DirS")),e.exports=o},BFyo:function(e,t,n){const o=n("6goN"),r=n("2MHW"),s=n("l39Q");e.exports=class{weApp(e,t,n){let i=wx.getStorageSync("openid");if(!(e&&t&&n&&i))throw new s(416);let a={order_price:e,product_name:t,body:n,open_id:i,pay_type:4},c=r._config.parameters.PAY;return o(c,"post",a)}}},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},DirS:function(e,t,n){const o=n("uTpP");let r=n("2MHW"),s=n("+L/W");e.exports=((e,t="get",i={})=>new Promise((a,c)=>{void 0===r.User&&(r=n("2MHW"));const u=((e,t)=>{let n="wechatApp";"nodejs"===r.type&&(n="cloudcode");const o=Math.round((new Date).getTime()/1e3),i=r.utils.randomString();let a={"content-type":"application/json","X-Bmob-SDK-Type":n,"X-Bmob-Safe-Sign":s.hexMD5(t+o+e.securityCode+i),"X-Bmob-Safe-Timestamp":o,"X-Bmob-Noncestr-Key":i,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(a["X-Bmob-Master-Key"]=e.applicationMasterKey),a})(r._config,e);var l=r.User.current();l&&(u["X-Bmob-Session-Token"]=l.sessionToken);const p=o.create({baseURL:r._config.host,headers:u,validateStatus:e=>e<500}),d={url:e,method:t};"get"===d.method?d.params=i:d.data=i,!0===r._config.deBug&&(console.log("host:",r._config.host),console.log("parma:",i)),p(d).then(({data:e})=>{(e.code&&e.error||e.error)&&c(e),a(e)}).catch(e=>{c(e)})}))},FfhM:function(e,t,n){"use strict";var o=n("qSdQ");e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=o.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},GqSV:function(e,t,n){"use strict";var o=n("qSdQ"),r=n("bTS+"),s=n("bBX1"),i=n("1qbz"),a=n("ktVP"),c=n("WFwD");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return u(e),t.data=r(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},GwXU:function(e,t,n){const o=n("6goN"),r=n("2MHW"),s=n("l39Q"),{isObject:i,isString:a}=n("1kO2");e.exports={generateCode:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.GENERATECODE;return o(t,"post",e)},sendMessage:e=>1,getAccessToken:e=>{let t=r._config.parameters.GETACCESSTOKEN;return o(t,"get")},sendWeAppMessage:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.SENDWEAPPMESSAGE;return o(t,"post",e)},refund:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.REFUND;return o(t,"post",e)},notifyMsg:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.NOTIFYMSG;return o(t,"post",e)},functions:(e,t)=>{if(t||(t={}),!a(e))throw new s(415);const n=`${r._config.parameters.FUNCTIONS}/${e}`;return new Promise((e,r)=>{o(n,"post",t).then(({result:t})=>{try{e(JSON.parse(t))}catch(n){e(t)}}).catch(e=>{r(e)})})},timestamp:()=>{let e=r._config.parameters.TIMESTAMP;return o(e,"get")},requestPasswordReset:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.REQUESTPASSWORDRESET;return o(t,"post",e)},resetPasswordBySmsCode:(e,t)=>{if(!a(e))throw new s(415);let n=`${r._config.parameters.RESETPASSWORDBYSMSCODE}/${e}`;return o(n,"put",t)},updateUserPassword:(e,t)=>{if(!i(t)||!a(e))throw new s(415);let n=`${r._config.parameters.UPDATEUSERPASSWORD}/${e}`;return o(n,"put",t)},geoPoint:({latitude:e,longitude:t})=>{return((e,t)=>{if(e<-90)throw new s(419);if(e>90)throw new s(419);if(t<-180)throw new s(419);if(t>180)throw new s(419)})(e,t),{__type:"GeoPoint",latitude:e,longitude:t}},checkMsg:e=>{if(!a(e))throw new s(415);let t=`${r._config.parameters.CHECK_MSG}`;return o(t,"post",{content:e})},push:e=>{if(!i(e))throw new s(415);let t=r._config.parameters.PUSH;return o(t,"post",e)}}},"KUL+":function(e,t,n){"use strict";var o=n("1qbz"),r=n("qSdQ"),s=n("L+Ay"),i=n("GqSV");function a(e){this.defaults=e,this.interceptors={request:new s,response:new s}}a.prototype.request=function(e){"string"==typeof e&&(e=r.merge({url:arguments[0]},arguments[1])),(e=r.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},r.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}}),r.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,n,o){return this.request(r.merge(o||{},{method:e,url:t,data:n}))}}),e.exports=a},"L+Ay":function(e,t,n){"use strict";var o=n("qSdQ");function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},"LE8+":function(e,t,n){"use strict";var o=n("qSdQ"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,i={};return e?(o.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=o.trim(e.substr(0,s)).toLowerCase(),n=o.trim(e.substr(s+1)),t){if(i[t]&&r.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}}),i):i}},M6jA:function(e,t,n){"use strict";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(){this.message="String contains an invalid character"}r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,s=String(e),i="",a=0,c=o;s.charAt(0|a)||(c="=",a%1);i+=c.charAt(63&t>>8-a%1*8)){if((n=s.charCodeAt(a+=.75))>255)throw new r;t=t<<8|n}return i}},MoLD:function(e,t){e.exports={_from:"hydrogen-js-sdk@2.1.0",_id:"hydrogen-js-sdk@2.1.0",_inBundle:!1,_integrity:"sha512-xo+HBjZib7DtDK2Mwfv5Rk0JFASJiM2A0zPkIXf7MPOg6Rlex9wUKZuOHQOjhUgM96cAYbedCqRgJzCJVonK+g==",_location:"/hydrogen-js-sdk",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"hydrogen-js-sdk@2.1.0",name:"hydrogen-js-sdk",escapedName:"hydrogen-js-sdk",rawSpec:"2.1.0",saveSpec:null,fetchSpec:"2.1.0"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/hydrogen-js-sdk/-/hydrogen-js-sdk-2.1.0.tgz",_shasum:"bd28f8b28d51fbd4d02d6350b71736ebed7f2f79",_spec:"hydrogen-js-sdk@2.1.0",_where:"C:\\Users\\abu\\Desktop\\project-test\\rzk-bmob-adminster-master",author:{name:"Bmob"},bugs:{url:"https://github.com/bmob/hydrogen-js-sdk/issues"},bundleDependencies:!1,dependencies:{"babel-runtime":"^6.26.0","node.extend":"^2.0.0",webpack:"^3.12.0"},deprecated:!1,description:"Bmob SDK",devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.5","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^0.1.19",eslint:"^4.19.1","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.12.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.1.0","html-webpack-plugin":"^2.30.1","uglifyjs-webpack-plugin":"^1.2.5","webpack-dev-server":"^2.11.2"},directories:{doc:"docs"},homepage:"https://github.com/bmob/hydrogen-js-sdk#readme",keywords:["Bmob"],license:"ISC",main:"./src/lib/app.js",name:"hydrogen-js-sdk",repository:{type:"git",url:"git+https://github.com/bmob/hydrogen-js-sdk.git"},scripts:{build:"webpack --config config/prod.env.js",dev:"webpack-dev-server --config config/dev.env.js",test:'echo "Error: no test specified" && exit 1',watch:"webpack --watch --config config/prod.env.js"},version:"2.1.0"}},Nnq6:function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},NsJw:function(e,t){const n={save(e,t){},fetch:e=>null,remove(e){},clear(){}};e.exports=n},NySg:function(e,t,n){const{isString:o}=n("1kO2"),r=n("l39Q");e.exports=class{constructor(e){if(!o(e))throw new r(415);this.tableName=e}set(e){if(!o(e))throw new r(415);return{__type:"Pointer",className:this.tableName,objectId:e}}}},QeYV:function(e,t,n){const o=n("6goN"),r=n("hUcW"),s=n("ahCf"),i=n("2MHW"),a=n("l39Q"),{isObject:c,isString:u,isNumber:l}=n("1kO2");e.exports=class extends s{constructor(){super("_User")}set(e,t=""){u(e)&&(this.setData[e]=t)}requestEmailVerify(e){if(!u(e))throw new a(415);this.setData=Object.assign({},{email:e}),console.log(this.setData);const t=i._config.parameters.REQUEST_EMAIL_VERIFY;return o(t,"post",this.setData)}register(e){if(!c(e))throw new a(415);this.setData=Object.assign({},e);const t=i._config.parameters.REGISTER;return o(t,"post",this.setData)}login(e,t){if(!u(e)||!u(t))throw new a(415);this.setData=Object.assign({},{username:e,password:t});const n=i._config.parameters.LOGIN;return new Promise((e,t)=>{o(n,"get",this.setData).then(t=>{r.save("bmob",t),e(t)}).catch(e=>{t(e)})})}logout(){r.clear()}users(){const e=i._config.parameters.USERS;return o(e,"get")}decryption(e){let t=this;return new Promise((n,r)=>{const s=e.iv?e.iv:e.detail.iv,a=e.encryptedData?e.encryptedData:e.detail.encryptedData,c=t.current();let u;const l={sessionKey:u="undefined"!=typeof tt?c.authData.toutiao.session_key:c.authData.weapp.session_key,encryptedData:a,iv:s},p=i._config.parameters.DECRYPTION;o(p,"POST",l).then(e=>{n(e)}).catch(e=>{r(e)})})}signOrLoginByMobilePhone(e,t){if(!l(e)||!l(t))throw new a(415);this.setData=Object.assign({},{mobilePhoneNumber:e,smsCode:t});const n=i._config.parameters.LOGIN;return o(n,"get",this.setData)}requestOpenId(e,t=""){const n=i._config.parameters.WECHAT_APP;return o(n+e,"POST",{anonymous_code:t})}linkWith(e){let t={authData:e};const n=i._config.parameters.USERS;return o(n,"POST",t)}loginWithWeapp(e,t="",n){return new Promise((o,r)=>{this.requestOpenId(e,t).then(e=>{let t={weapp:e};if("undefined"!=typeof tt&&(delete e.error,t={toutiao:e}),"openid"===n)o(e);else{const e=this.linkWith(t);o(e)}}).catch(e=>{r(e)})})}upInfo(e){return new Promise((t,n)=>{let o=e.nickName,s=e.avatarUrl,i=this.current();if(!i)throw new a(415);let c=r.fetch("openid");this.get(i.objectId).then(e=>{e.set("nickName",o),e.set("userPic",s),e.set("openid",c),e.save().then(e=>{t(e)}).catch(e=>{console.log(e),n(e)})}).catch(e=>{console.log(e),n(e)})})}openId(){console.log("fff"),this.auth("openid")}auth(e=""){let t=this;return new Promise((n,o)=>{const s=()=>{wx.login({success:s=>{console.log(s);let i="";"undefined"!=typeof tt&&(i=s.anonymousCode),t.loginWithWeapp(s.code,i,e).then(e=>{if(e.error)throw new a(415);let t;t="undefined"!=typeof tt?e.authData.toutiao.openid:e.authData.weapp.openid,r.save("openid",t),r.save("bmob",e),n(e)},function(e){o(e)})}})};wx.checkSession({success:function(){let e=t.current();null===e&&o("登陆错误，请在Bmob后台填写小程序AppSecret。"),n(e),s()},fail:()=>{s()}})})}}},"RY/4":function(e,t,n){var o=n("R9M2"),r=n("dSzd")("toStringTag"),s="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:s?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},TO1N:function(e,t,n){"use strict";var o=n("09bm");e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(o("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},Vj63:function(e,t,n){const{isString:o,isArray:r}=n("1kO2"),s=n("l39Q");function i(e,t){if(o(e))return{__op:t,objects:[{__type:"Pointer",className:this.tableName,objectId:e}]};if(r(e)){const n=[];return e.map(e=>{if(!o(e))throw new s(415);n.push({__type:"Pointer",className:this.tableName,objectId:e})}),{__op:t,objects:n}}throw new s(415)}e.exports=class{constructor(e){if(!o(e))throw new s(415);this.tableName=e}add(e){return i.call(this,e,"AddRelation")}remove(e){return i.call(this,e,"RemoveRelation")}}},WFwD:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},XOPJ:function(e,t,n){let o,r;try{r=`v${(o=n("MoLD")).version}`}catch(e){r="v1.0.0"}e.exports={host:"https://api.bmobcloud.com",secretKey:"",securityCode:"",applicationMasterKey:"",parameters:{GENERATECODE:"/1/wechatApp/qr/generatecode",GETACCESSTOKEN:"/1/wechatApp/getAccessToken",SENDWEAPPMESSAGE:"/1/wechatApp/SendWeAppMessage",NOTIFYMSG:"/1/wechatApp/notifyMsg",REFUND:"/1/pay/refund",REQUESTSMSCODE:"/1/requestSmsCode",VERIFYSMSCODE:"/1/verifySmsCode",FUNCTIONS:"/1/functions",REQUESTPASSWORDRESET:"/1/requestPasswordReset",RESETPASSWORDBYSMSCODE:"/1/resetPasswordBySmsCode",UPDATEUSERPASSWORD:"/1/updateUserPassword",PUSH:"/1/push",FILES:"/2/files",DELFILES:"/2/cdnBatchDelete",TIMESTAMP:"/1/timestamp",LOGIN:"/1/login",REGISTER:"/1/users",REQUEST_EMAIL_VERIFY:"/1/requestEmailVerify",USERS:"/1/users",PAY:"/1/pay",WECHAT_APP:"/1/wechatApp/",BATCH:"/1/batch",CHECK_MSG:"/1/wechatApp/checkMsg",DECRYPTION:"/1/wechatApp/decryption",QUERY:"/1/classes"},version:r,deBug:!1,type:3}},XOxI:function(e,t,n){"use strict";var o=n("ogWm"),r=n.n(o);n.d(t,"c",function(){return s}),n.d(t,"a",function(){return r.a}),r.a.initialize("4b4a0124ab245dbf","131412");var s=function(e){r.a.initialize("4b4a0124ab245dbf","131412",e)}},aQjw:function(e,t,n){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},ahCf:function(e,t,n){let o=n("2MHW");const r=n("6goN"),{isObject:s,isString:i,isNumber:a,isUndefined:c,isArray:u}=n("1kO2"),l=n("l39Q"),p=n("hUcW");function d(e,t,n){let o={},r={};r[t]=n,o[e]=r;let s=o;return Object.keys(this.queryData).length?c(this.queryData.$and)?this.queryData={$and:[this.queryData,s]}:this.queryData.$and.push(s):this.queryData=s,s}e.exports=class{constructor(e){this.tableName=`${o._config.parameters.QUERY}/${e}`,this.className=e,this.init(),this.addArray={},this.setData={}}init(){this.queryData={},this.location={},this.andData={},this.orData={},this.stat={},this.limitNum=100,this.skipNum=0,this.includes="",this.queryReilation={},this.orders=null,this.keys=null}get(e){if(!i(e))throw new l(415);let t={};const n={},o={},s={},d=(e,t)=>{if(!i(e)||!u(t))throw new l(415);s[e]={__op:"Add",objects:t}},h=(e,t)=>{if(!i(e)||!u(t))throw new l(415);s[e]={__op:"AddUnique",objects:t}},f=(e,t)=>{if(!i(e)||!u(t))throw new l(415);s[e]={__op:"Remove",objects:t}},m=(e,t=1)=>{if(!i(e)||!a(t))throw new l(415);n[e]={__op:"Increment",amount:t}},g=t=>{if(!i(e))throw new l(415);o[t]={__op:"Delete"}},w=(e,n)=>{if(!i(e)||c(n))throw new l(415);const{filename:o,cdn:r,url:s}=n;c(o)||c(r)||c(s)?t[e]=n:t[e]={__type:"File",group:r,filename:o,url:s}},y=()=>{const i=Object.assign(o,t,n,s);return"_User"===this.className?new Promise((t,n)=>{r(`${this.tableName}/${e}`,"put",i).then(e=>{const n=this.current();let o=Object.assign(n,i);p.save("bmob",o),t(e)}).catch(e=>{n(e)})}):r(`${this.tableName}/${e}`,"put",i)},b={};return""!==this.includes&&(b.include=this.includes),new Promise((t,n)=>{r(`${this.tableName}/${e}`,"get",b).then(n=>{Object.defineProperty(n,"set",{value:w}),Object.defineProperty(n,"unset",{value:g}),Object.defineProperty(n,"save",{value:y}),Object.defineProperty(n,"increment",{value:m}),Object.defineProperty(n,"add",{value:d}),Object.defineProperty(n,"remove",{value:f}),Object.defineProperty(n,"addUnique",{value:h}),Object.defineProperty(n,"destroy",{value:()=>this.destroy(e)}),t(n)}).catch(e=>{n(e)})})}destroy(e){if(!i(e))throw new l(415);return r(`${this.tableName}/${e}`,"delete")}set(e,t){if(!i(e)||c(t))throw new l(415,`${e}字段参数,类型不正确`);const{filename:n,cdn:o,url:r}=t;c(n)||c(o)||c(r)?this.setData[e]=t:this.setData[e]={__type:"File",group:o,filename:n,url:r}}add(e,t){if(!i(e)||!u(t))throw new l(415);this.addArray[e]={__op:"Add",objects:t}}addUnique(e,t){if(!i(e)||!u(t))throw new l(415);this.addArray[e]={__op:"AddUnique",objects:t}}current(){if("hap"!==o.type){const e=p.fetch("bmob");return"object"==typeof e?e:JSON.parse(e)}return new Promise((e,t)=>p.fetch("bmob").then(t=>{e(t)}).catch(e=>{t(e)}))}updateStorage(e){if(!i(e))throw new l(415);return new Promise((t,n)=>{const o=this.current();if(!o)throw new l(415);this.get(e).then(e=>{let n=Object.assign(o,e);p.save("bmob",n),t(e)}).catch(e=>{console.log(e),n(e)})})}save(e={}){if(!s(e))throw new l(415);let t=this.setData.id?"PUT":"POST",n=this.setData.id?this.setData.id:"";delete this.setData.id;let o=Object.assign(e,this.setData,this.addArray);return new Promise((e,s)=>{r(`${this.tableName}/${n}`,t,o).then(t=>{if(this.addArray={},this.setData={},"_User"===this.className){const e=this.current();let t=Object.assign(e,o);p.save("bmob",t)}e(t)}).catch(e=>{s(e)})})}saveAll(e){if(!u(e))throw new l(415);if(e.length<1)throw new l(416);let t,n,s="put",i=[];e.map(e=>("/undefined"===(t=`/${e.objectId}`)&&(t="",s="post"),n={method:s,path:`${this.tableName}${t}`,body:e.setData},i.push(n),e));let a={requests:i},c=o._config.parameters.BATCH;return r(c,"POST",a)}withinKilometers(e,{latitude:t,longitude:n},o=100){let r={};return r[e]={$nearSphere:{__type:"GeoPoint",latitude:t,longitude:n},$maxDistanceInKilometers:o},this.location=r,r}withinGeoBox(e,{latitude:t,longitude:n},o){let r={};return r[e]={$within:{$box:[{__type:"GeoPoint",latitude:t,longitude:n},{__type:"GeoPoint",latitude:o.latitude,longitude:o.longitude}]}},this.location=r,r}statTo(e,t){if(!i(e))throw new l(415);return this.stat[e]=t,this.stat}equalTo(e,t,n){if(!i(e))throw new l(415);const o=((e,t,n)=>{let o={},r=null;switch(r="createdAt"===e||"updateAt"===e?{__type:"Date",iso:n}:n,t){case"==":case"===":o[e]=r;break;case"!=":o[e]={$ne:r};break;case"<":o[e]={$lt:r};break;case"<=":o[e]={$lte:r};break;case">":o[e]={$gt:r};break;case">=":o[e]={$gte:r};break;default:throw new l(415)}return o})(e,t,n);return Object.keys(this.queryData).length?c(this.queryData.$and)?this.queryData={$and:[this.queryData,o]}:this.queryData.$and.push(o):this.queryData=o,o}containedIn(e,t){if(!i(e)||!u(t))throw new l(415);return d.call(this,e,"$in",t)}notContainedIn(e,t){if(!i(e)||!u(t))throw new l(415);return d.call(this,e,"$nin",t)}exists(e){if(!i(e))throw new l(415);return d.call(this,e,"$exists",!0)}doesNotExist(e){if(!i(e))throw new l(415);return d.call(this,e,"$exists",!1)}or(...e){e.map((e,t)=>{if(!s(e))throw new l(415)});const t=this.queryData.$and;if(!c(t)){for(let n=0;n<t.length;n++)for(let o=0;o<e.length;o++)JSON.stringify(t[n])===JSON.stringify(e[o])&&this.queryData.$and.splice(n,1);t.length||delete this.queryData.$and}this.orData={$or:e}}and(...e){e.map((e,t)=>{if(!s(e))throw new l(415)}),this.andData={$and:e}}limit(e){if(!a(e))throw new l(415);e>1e3&&(e=1e3),this.limitNum=e}skip(e){if(!a(e))throw new l(415);this.skipNum=e}order(...e){e.map(e=>{if(!i(e))throw new l(415)}),this.orders=e.join(",")}include(...e){e.map(e=>{if(!i(e))throw new l(415)}),this.includes=e.join(",")}select(...e){e.map(e=>{if(!i(e))throw new l(415)}),this.keys=e.join(",")}field(e,t){if(!i(e)||!i(t))throw new l(415);this.queryReilation.where={$relatedTo:{object:{__type:"Pointer",className:this.className,objectId:t},key:e}}}relation(e){if(!i(e))throw new l(415);e="_User"===e?"users":`classes/${e}`,this.queryReilation.count=1;let t=Object.assign(this.getParams(),this.queryReilation);return new Promise((n,o)=>{r(`/1/${e}`,"get",t).then(e=>{n(e)}).catch(e=>{o(e)})})}getParams(){let e={};Object.keys(this.queryData).length&&(e.where=this.queryData),Object.keys(this.location).length&&(e.where=Object.assign(this.location,this.queryData)),Object.keys(this.andData).length&&(e.where=Object.assign(this.andData,this.queryData)),Object.keys(this.orData).length&&(e.where=Object.assign(this.orData,this.queryData)),e.limit=this.limitNum,e.skip=this.skipNum,e.include=this.includes,e.order=this.orders,e.keys=this.keys,Object.keys(this.stat).length&&(e=Object.assign(e,this.stat));for(const t in e)(e.hasOwnProperty(t)&&null===e[t]||0===e[t]||""===e[t])&&delete e[t];return e}find(){let e={},t={};const n=this.getParams(),s=(t,n)=>{if(!t||c(n))throw new l(415);e[t]=n},i=(n="updata")=>{if(console.log(n),t.length<1)throw new l(416);let s,i,a="put",c=[];t.map(t=>("/undefined"===(s=`/${t.objectId}`)&&(s="",a="post"),i={method:a,path:`${this.tableName}${s}`,body:e},"delete"===n&&(i={method:"DELETE",path:`${this.tableName}${s}`}),c.push(i),t));let u={requests:c},p=o._config.parameters.BATCH;return r(p,"POST",u)};return new Promise((e,o)=>{r(`${this.tableName}`,"get",n).then(o=>{let r=o.results;n.hasOwnProperty("count")&&(r=o),this.init(),Object.defineProperty(r,"set",{value:s}),Object.defineProperty(r,"saveAll",{value:()=>i()}),Object.defineProperty(r,"destroyAll",{value:()=>i("delete")}),t=r,e(r)}).catch(e=>{o(e)})})}count(e=0){const t={};return Object.keys(this.queryData).length&&(t.where=this.queryData),Object.keys(this.andData).length&&(t.where=Object.assign(this.andData,this.queryData)),Object.keys(this.orData).length&&(t.where=Object.assign(this.orData,this.queryData)),t.count=1,t.limit=e,new Promise((e,n)=>{r(`${this.tableName}`,"get",t).then(({count:t})=>{e(t)}).catch(e=>{n(e)})})}}},bBX1:function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"bTS+":function(e,t,n){"use strict";var o=n("qSdQ");e.exports=function(e,t,n){return o.forEach(n,function(n){e=n(e,t)}),e}},eHrh:function(e,t,n){const{isString:o,isObject:r}=n("1kO2"),s={save(e,t){if(!o(e)||!t)throw new Error(415);return t=r(t)?JSON.stringify(t):t,wx.setStorageSync(e,t)},fetch(e){if(!o(e))throw new Error(415);return wx.getStorageSync(e)||null},remove(e){if(!o(e))throw new Error(415);return wx.removeStorageSync(e)},clear:()=>wx.clearStorageSync()};e.exports=s},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g8Ux:function(e,t,n){var o=n("77Pl"),r=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},hUcW:function(e,t,n){let o;const r=n("ktOl").getAppType();"h5"===r?o=n("1Iar"):"wx"===r?o=n("eHrh"):"hap"===r?o=n("iZAM"):"nodejs"===r&&(o=n("NsJw")),e.exports=o},iZAM:function(e,t,n){const{isString:o}=n("1kO2"),r="xxrequire('@system.storage')xx",s={save(e,t){if(!o(e)||!t)throw new Error(415);r.set({key:e,value:JSON.stringify(t),success:function(e){return console.log("handling success"),e},fail:function(e,t){console.log(`handling fail, code = ${t}`)}})},fetch(e){if(!o(e))throw new Error(415);return new Promise((t,n)=>r.get({key:e,success:function(e){t(e||null)},fail:function(e,t){console.log(`handling fail, code = ${t}`),n(e)}}))},remove(e){if(!o(e))throw new Error(415);r.delete({key:e,success:function(e){console.log("handling success")},fail:function(e,t){console.log(`handling fail, code = ${t}`)}})},clear(){r.clear({success:function(e){console.log("handling success")},fail:function(e,t){console.log(`handling fail, code = ${t}`)}})}};e.exports=s},iun9:function(e,t,n){let o=n("2MHW"),r=n("+L/W"),s="wechatApp";"undefined"!=typeof tt&&(s="toutiao");e.exports=((e,t="get",i={})=>new Promise((a,c)=>{const u=((e,t)=>{const n=Math.round((new Date).getTime()/1e3),i=o.utils.randomString(),a=r.hexMD5(t+n+e.securityCode+i);let c={"content-type":"application/json","X-Bmob-SDK-Type":s,"X-Bmob-Safe-Sign":a,"X-Bmob-Safe-Timestamp":n,"X-Bmob-Noncestr-Key":i,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(c["X-Bmob-Master-Key"]=e.applicationMasterKey),c})(o._config,e);void 0===o.User&&(o=n("2MHW"));let l=o.User.current();l&&(u["X-Bmob-Session-Token"]=l.sessionToken),!0===o._config.deBug&&(console.log("host:",o._config.host),console.log("parma:",i)),wx.request({url:o._config.host+e,method:t,data:i,header:u,success:e=>{(e.data.code&&e.data.error||e.data.error)&&c(e.data),a(e.data)},fail:e=>{console.log(e),c(e)}})}))},koJV:function(e,t,n){const o=n("6goN");let r=n("2MHW");const s=n("l39Q"),i=n("ktOl");let a=n("+L/W");const c="xxrequire('@system.request')xx",{isString:u,isArray:l}=n("1kO2");let p=[];e.exports=class{constructor(e,t){if(e&&t){if(!u(e))throw new s(415);let n=e.substring(e.lastIndexOf(".")+1);p.push({name:e,route:`${r._config.parameters.FILES}/${r._config.secretKey}.${n}`,data:t})}}save(){if(!p.length)throw new s(417);let e;const t=i.getAppType();return"h5"===t||"nodejs"===t?e=new Promise((e,t)=>{const n=[];for(let r of p)o(r.route,"post",r.data).then(o=>{n.push(o),n.length===p.length&&(p=[],e(n),t(n))}).catch(e=>{n.push(e)})}):"wx"===t?e=new Promise((e,t)=>{void 0===r.User&&(r=n("2MHW"));let o="bmob",s=r.User.current();s&&(o=s.sessionToken);const i=[],c=Math.round((new Date).getTime()/1e3),u=r.utils.randomString(),l=p[0].route;console.log("rand",u,r,l);const d={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":a.hexMD5(l+c+r._config.securityCode+u),"X-Bmob-Safe-Timestamp":c,"X-Bmob-Noncestr-Key":u,"X-Bmob-Session-Token":o,"X-Bmob-Secret-Key":r._config.secretKey},h=Object.assign({_ContentType:"text/plain",mime_type:"text/plain",category:"wechatApp",_ClientVersion:"js3.6.1",_InstallationId:"bmob"},d);for(let n of p)wx.uploadFile({url:r._config.host+n.route,filePath:n.data,name:"file",header:d,formData:h,success:function(n){let o=JSON.parse(n.data);i.push(o),i.length===p.length&&(p=[],e(i),t(i))},fail:function(e){i.push(e)}})}):"hap"===t&&(e=new Promise((e,t)=>{void 0===r.User&&(r=n("2MHW"));let o="bmob",s=r.User.current();s&&(o=s.sessionToken);const i=[],u=Math.round((new Date).getTime()/1e3),l=r.utils.randomString(),d=p[0].route;console.log("rand",l,r,d);const h={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":a.hexMD5(d+u+r._config.securityCode+l),"X-Bmob-Safe-Timestamp":u,"X-Bmob-Noncestr-Key":l,"X-Bmob-Session-Token":o,"X-Bmob-Secret-Key":r._config.secretKey},f=Object.assign({_ContentType:"text/plain",mime_type:"text/plain",category:"wechatApp",_ClientVersion:"js3.6.1",_InstallationId:"bmob"},h);for(let n of p)c.upload({url:r._config.host+n.route,files:[{uri:n.data,name:"file",filename:n.name}],header:{"X-Bmob-SDK-Type":"wechatApp"},data:f,success:function(n){console.log("handling success"+i);let o=n.data;i.push(o),i.length===p.length&&(p=[],e(i),t(i))},fail:function(e,t){console.log(`handling fail, code = ${t}`)}})})),e}destroy(e){if(u(e))return o(`${r._config.parameters.FILES}/upyun/${e.split(".com/")[1]}`,"delete");if(l(e)){const t=[];return e.map(e=>{t.push(e.split(".com/")[1])}),o(r._config.parameters.DELFILES,"post",{upyun:t})}throw new s(415)}}},ktOl:function(e,t,n){(function(t,o){let r;r=n("XOPJ");const s=(e=!1)=>(!0===e&&(r.host=n("0KGY").host),r);e.exports={randomString:()=>{let e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="";for(let n=0;n<16;n++)t+=e[parseInt(61*Math.random())];return t},getConfig:s,getAppType:()=>{const e=s();let n;return n="undefined"!=typeof wx?"wx":"undefined"!=typeof window?"h5":t===o.process?"nodejs":3===e.type?"hap":"h5"}}}).call(t,n("W2nU"),n("DuR2"))},ktVP:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},l39Q:function(e,t){e.exports=class{constructor(e,t){let n=new Error;return n.code=e,n.message=t?`Bmob.Error:{code:${e}, message:${t}}`:`Bmob.Error:{code:${e}, message:${this.errorMsg(e)}}`,n}errorMsg(e){switch(e){case 415:return"incorrect parameter type.";case 416:return"Parameter is null.";case 417:return"There is no upload content.";case 418:return"Log in failure.";case 419:return"Bmob.GeoPoint location error.";default:return"unknown error"}}}},nHBG:function(e,t,n){"use strict";var o=n("qSdQ");function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(r(t)+"="+r(e))}))}),s=i.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},nHR3:function(e,t,n){"use strict";e.exports=function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e}},ogWm:function(e,t,n){(function(t){const o=n("2MHW"),r=n("NySg"),s=n("Vj63"),i=n("ahCf"),a=n("QeYV"),c=n("koJV"),u=n("BFyo"),l=n("vikD"),{generateCode:p,sendMessage:d,getAccessToken:h,sendWeAppMessage:f,refund:m,notifyMsg:g,functions:w,timestamp:y,requestPasswordReset:b,resetPasswordBySmsCode:S,updateUserPassword:E,geoPoint:D,checkMsg:O,push:j}=n("GwXU"),{requestSmsCode:v,verifySmsCode:_}=n("0zzc");o.GeoPoint=D,o.generateCode=p,o.sendMessage=d,o.getAccessToken=h,o.sendWeAppMessage=f,o.refund=m,o.checkMsg=O,o.notifyMsg=g,o.requestSmsCode=v,o.verifySmsCode=_,o.run=o.functions=w,o.timestamp=y,o.requestPasswordReset=b,o.resetPasswordBySmsCode=S,o.updateUserPassword=E,o.push=j,o.Pay=new u,o.User=new a,o.Socket=(e=>new l(e)),o.Query=(e=>new i(e)),o.File=((e,t)=>new c(e,t)),o.request=n("6goN"),o.type=o.utils.getAppType(),o.Pointer=(e=>new r(e)),o.Relation=(e=>new s(e)),"wx"===o.type?"undefined"!=typeof tt?tt.Bmob=o:wx.Bmob=o:"h5"===o.type?window.Bmob=o:"hap"===o.type?t.Bmob=o:"nodejs"===o.type&&(t.Bmob=o),e.exports=o}).call(t,n("DuR2"))},qRwy:function(e,t,n){"use strict";var o=n("qSdQ");e.exports=function(e,t){o.forEach(e,function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])})}},qSdQ:function(e,t,n){"use strict";var o=n("r01J"),r=n("Re3r"),s=Object.prototype.toString;function i(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:r,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]=n}for(var o=0,r=arguments.length;o<r;o++)u(arguments[o],n);return t},extend:function(e,t,n){return u(t,function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},r01J:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}}},uTpP:function(e,t,n){"use strict";var o=n("qSdQ"),r=n("r01J"),s=n("KUL+"),i=n("1qbz");function a(e){var t=new s(e),n=r(s.prototype.request,t);return o.extend(n,s.prototype,t),o.extend(n,t),n}var c=a(i);c.Axios=s,c.create=function(e){return a(o.merge(i,e))},c.Cancel=n("aQjw"),c.CancelToken=n("6YN9"),c.isCancel=n("bBX1"),c.all=function(e){return Promise.all(e)},c.spread=n("Nnq6"),e.exports=c,e.exports.default=c},vikD:function(t,n,o){const r=o("l39Q"),s={setup(e){let t=[];Object.assign(e,{on(e,n){"function"==typeof n&&t.push([e,n])},emit(e,...n){t.forEach(([t,o])=>e===t&&o(...n))},removeAllListeners(){t=[]}})}};t.exports=class{constructor(e=""){if(console.log("id",e),""===e)throw new r(415);this.config={host:"wss.bmobcloud.com"},s.setup(this.emitter={}),this.applicationId=e,this.initialize()}handshake(){let t="https://"+this.config.host+"/socket.io/1/?t="+(new Date).getTime(),n=JSON.stringify({});return new Promise((o,s)=>{wx.request({method:"GET",url:t,data:n,header:{"content-type":"text/plain"},success:function(t){return t.data&&t.data.statusCode?o("request error",e):200!==t.statusCode?o("request error",e):o(function(e){if(!(e instanceof r))return e.split(":")[0];self.connecting=!1,self.onError(e.message)}(t.data))},fail:function(e){return o("request error",e)}})})}initialize(){return this.handshake().then(e=>{try{this.connect(`wss://${this.config.host}/socket.io/1/websocket/`+e,{})}catch(e){throw console.error({connectError:e}),e}}),this.on("close",()=>{console.log("连接已中断")}),new Promise((e,t)=>{this.on("server_pub",e=>{switch(e.action){case"updateTable":this.onUpdateTable(e.tableName,e.data);break;case"updateRow":this.onUpdateRow(e.tableName,e.objectId,e.data);break;case"deleteTable":this.onDeleteTable(e.tableName,e.data);break;case"deleteRow":this.onDeleteRow(e.tableName,e.objectId,e.data)}}),this.on("client_send_data",e=>{this.onInitListen()})})}onInitListen(){}connect(e,t){const n=Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&"),o=e.indexOf("?")>-1?"&":"?";return e=[e,n].join(o),new Promise((n,o)=>{wx.onSocketOpen(n),wx.onSocketError(o),wx.onSocketMessage(e=>{try{let t=function(e){const{name:t,args:n}=JSON.parse(e);return{name:t,args:n}},n=e.data;if("2:::"===n.slice(0,4)&&this.emit(!1,!0),null===(n=n.slice(4))||""===n)return;const{name:o,args:r}=t(n);let s=null==r?"":JSON.parse(r[0]);this.emitter.emit(o,s)}catch(t){console.log("Handle packet failed: "+e.data,t)}}),wx.onSocketClose(()=>this.emitter.emit("close")),wx.connectSocket({url:e,header:t})})}on(e,t){this.emitter.on(e,t)}emit(e,t){t=void 0===t?"5:::":"2:::",e=e?JSON.stringify(e):"",wx.sendSocketMessage({data:t+e})}emitData(e,t){return{name:e,args:[t=JSON.stringify(t)]}}updateTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"updateTable"};t=this.emitData("client_sub",t),this.emit(t)}unsubUpdateTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"unsub_updateTable"};t=this.emitData("client_sub",t),this.emit(t)}updateRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"updateRow"};n=this.emitData("client_sub",n),this.emit(n)}unsubUpdateRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"unsub_updateRow"};n=this.emitData("client_sub",n),this.emit(n)}deleteTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"deleteTable"};t=this.emitData("client_sub",t),this.emit(t)}unsubDeleteTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"unsub_deleteTable"};t=this.emitData("client_sub",t),this.emit(t)}deleteRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"deleteRow"};n=this.emitData("client_sub",n),this.emit(n)}unsubDeleteRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"unsub_deleteRow"};n=this.emitData("client_sub",n),this.emit(n)}onUpdateTable(e,t){}onUpdateRow(e,t,n){}onDeleteTable(e,t){}onDeleteRow(e,t,n){}}}});